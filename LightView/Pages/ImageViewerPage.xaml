<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="LightView.Pages.ImageViewerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:LightView.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid x:Name="TitleBarHost" Height="48" VerticalAlignment="Top" Canvas.ZIndex="99" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1">
            <Grid.Background>
                <AcrylicBrush TintColor="Transparent" TintOpacity="0.6" FallbackColor="Transparent"/>
            </Grid.Background>
            <TitleBar x:Name="TitleBar" 
                      Height="48" 
                      VerticalAlignment="Top"
                      IsBackButtonVisible="True"
                      BackRequested="TitleBar_BackRequested" 
                      Title="{x:Bind ViewModel.CurrentImage.Name, Mode=OneWay}"  
                      Subtitle="{x:Bind ViewModel.DisplayInfo, Mode=OneWay}"
                      Canvas.ZIndex="1" >
                <TitleBar.RightHeader>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button x:Name="SettingsButton" Style="{ThemeResource TitleBarButtonStyle}" Click="SettingsButton_Click">
                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE713;" />
                        </Button>
                        <Button x:Name="MenuButton" Style="{ThemeResource TitleBarButtonStyle}">
                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE712;" />
                            <Button.Flyout>
                                <MenuFlyout>
                                    <MenuFlyoutItem Text="分享照片" Command="{x:Bind ViewModel.ShareImageCommand, Mode=OneWay}">
                                        <MenuFlyoutItem.Icon>
                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE72D;" />
                                        </MenuFlyoutItem.Icon>
                                    </MenuFlyoutItem>
                                    <MenuFlyoutItem Text="打印照片" Command="{x:Bind ViewModel.PrintImageCommand, Mode=OneWay}">
                                        <MenuFlyoutItem.Icon>
                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE749;" />
                                        </MenuFlyoutItem.Icon>
                                    </MenuFlyoutItem>
                                </MenuFlyout>
                            </Button.Flyout>
                        </Button>
                    </StackPanel>
                    
                </TitleBar.RightHeader>
            </TitleBar>
        </Grid>
        
        <ScrollView ZoomMode="Enabled">
            <Image x:Name="ImageViewer" Source="{x:Bind ViewModel.CurrentImage.ImageSource, Mode=OneWay}" />
        </ScrollView>
    </Grid>
</Page>
